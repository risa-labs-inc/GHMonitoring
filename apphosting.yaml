runConfig:
  runtime: nodejs20

  # Use Cloud Run gen2 execution environment
  # Setting cpu > 0 and memoryMiB >= 512 should force gen2
  cpu: 1
  memoryMiB: 512
  minInstances: 0
  maxInstances: 10
  concurrency: 80

  # Explicitly request gen2 execution environment
  executionEnvironment: gen2

  # VPC Access Configuration for Cloud SQL Private IP
  vpcAccess:
    egress: PRIVATE_RANGES_ONLY
    networkInterfaces:
      - network: default
        subnetwork: default

  # Environment variables (will be configured in Firebase Console)
  env:
    - variable: NODE_ENV
      value: production
    - variable: PORT
      value: "8080"
    - variable: DATABASE_URL
      secret: DATABASE_URL
    - variable: GITHUB_ORG
      value: risa-labs-inc
    - variable: GITHUB_PROJECT_NUMBER
      value: "3"
    - variable: POLLING_CRON_SCHEDULE
      value: "0 * * * *"
    - variable: LOG_LEVEL
      value: info
